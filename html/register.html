<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../css/index.css"/>
		<link rel="stylesheet" type="text/css" href="../css/footer.css"/>
		<link rel="stylesheet" type="text/css" href="../css/register-login.css"/>
	</head>
	<body>
		<header id="rl-box1">
			<div class="logo"></div>
		</header>
		<section id="rl-box2">
			<div class="p-lo"></div>
			<div class="r-table">
				<div class="r1">
					新用户注册
					<label>我已注册，现在就<a href="login.html">登录</a></label>
				</div>
				<span class="insize"><label>用户名：</label><input class="text" type="text" name="username" placeholder="请输入用户名" /></span>
				<span class="hint"></span>
				<span class="insize"><label>&nbsp;&nbsp;&nbsp;密码：</label><input class="text" type="password" name="password" placeholder="请输入密码" /></span>
				<span class="hint"></span>
				<input class="btnss" type="submit" value="注册" />
				
			</div>
		</section>
		<footer id="r-box3">
			<p class="fonts">
				Copyright 2007 - 2016 vancl.com All Rights Reserved 京ICP证100557号 京公网安备11010102000579号 出版物经营许可证新出发京批字第直110138号
			</p>
			<div class="r-last-p">
				<div class="wz">
					<a id="pic1" href="https://search.szfw.org/cert/l/CX20111229001302001330"></a>
					<a id="pic2" href="#"></a>
					<a id="pic3" href="http://www.315online.com.cn/member/315090053.html"></a>
					<a id="pic4" href="http://www.hd315.gov.cn/beian/view.asp?bianhao=010202010081900017"></a>
				</div>
			</div>
		</footer>
		<script src="../js/myajax.js" type="text/javascript" charset="utf-8"></script>
		<script>
			var oUsername = document.querySelector("input[name=username]");
			var oPassword = document.querySelector("input[name=password]");
			var oSubmit = document.querySelector("input[type=submit]");
			var oSpan = document.querySelector("span[class=hint]");
			oSubmit.onclick = function(){
				myajax.post("http://h6.duchengjiu.top/shop/api_user.php",{
					status:"register",
					username:oUsername.value,
					password:oPassword.value,
				},function(err, responseText){
					var json = JSON.parse(responseText);
					if (json.code === 0) {
						alert("注册成功");
						location.href = "login.html"
					}
				});
			}
			oUsername.onblur = function(){
			var xhr = new XMLHttpRequest();
			xhr.onreadystatechange = function(){
				if (xhr.readyState === xhr.DONE) {
					var json = JSON.parse(xhr.responseText);
					oSpan.innerText = json.message;
					oSpan.style.display = "block";
					if (json.code === 0) {
						oSpan.className = "right";
					} else{
						oSpan.className = "error";
					}
				}
			}
			xhr.open("POST","http://h6.duchengjiu.top/shop/api_user.php");
			xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
			xhr.send("status=check&username="+oUsername.value);
		}
			</script>
	</body>
	
</html>